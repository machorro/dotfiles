{{ if eq .chezmoi.os "darwin" -}}
#!/bin/bash

brew update
brew install mas

cat > $HOME/.Brewfile <<EOF
# Taps
tap 'homebrew/bundle'
tap 'homebrew/services'

# Install GNU utilities
brew 'coreutils'
brew 'findutils'
brew 'grep'
brew 'moreutils'
brew 'openssh'
brew 'osxutils'
brew 'tree'
brew 'wget'

# Update git and install utilities
brew 'bat'
brew 'ccat'
brew 'curl'
brew 'git-extras'
brew 'git'
brew 'grep'
brew 'highlight'
brew 'mackup'
brew 'wifi-password'

# Brew Dev tools
brew 'a7ex/formulae/xcresultparser'
brew 'awscli'
brew 'bitrise'
brew 'chisel'
brew 'danger/tap/danger-swift'
brew 'detekt'
brew 'fish'
brew 'getsentry/tools/sentry-cli'
brew 'gh'
brew 'gradle'
brew 'htop'
brew 'httpie'
brew 'jq'
brew 'kotlin-language-server'
brew 'ktlint'
brew 'newrelic-cli'
brew 'node'
brew 'nvm' # Node and Rails
brew 'openjdk@17', link: true
brew 'periphery'
brew 'php' # needed for alfred
brew 'pre-commit'
brew 'python'
brew 'rbenv'
brew 'ruby-build'
brew 'saml2aws'
brew 'shellcheck'
brew 'sonar-scanner'
brew 'starship'
brew 'swift-outdated'
brew 'swiftformat'
brew 'swiftgen'
brew 'swiftlint'
brew 'unxip'
brew 'uv'
brew 'xcbeautify'
brew 'xcdiff'
brew 'xclogparser'
brew 'xcode-build-server'
brew 'xcode-kotlin'
brew 'xcodegen'

# Casks
cask '1password'
cask '1password-cli'
cask 'airbuddy'
cask 'alfred'
cask 'arc'
cask 'contexts'
cask 'discord'
cask 'imagealpha'
cask 'imageoptim'
cask 'jordanbaird-ice'
cask 'languagetool'
cask 'lunar'
cask 'paletro'
cask 'rocket'
cask 'steermouse'
cask 'telegram'
cask 'whatsapp'

# Casks Dev tools
cask 'android-studio'
cask 'aws-vpn-client'
cask 'claude'
cask 'claude-code'
cask 'cursor'
cask 'cursor-cli'
cask 'devtoys'
cask 'espanso'
cask 'figma'
cask 'iterm2'
cask 'kaleidoscope'
cask 'paw'
cask 'periphery'
cask 'sf-symbols'
cask 'swiftformat-for-xcode'
cask 'tower'
cask 'tuist'
cask 'visual-studio-code'
cask 'x-swiftformat'
cask 'xcodes'
cask 'xcodes-app'

# Quicklook Plugins
cask 'betterzip'
cask 'provisionql'
cask 'qlcolorcode'
cask 'qlimagesize'
cask 'qlmarkdown'
cask 'qlprettypatch'
cask 'qlstephen'
cask 'quicklook-csv'
cask 'quicklook-json'
cask 'suspicious-package'
cask 'webpquicklook'

# Fonts
cask 'font-anonymous-pro'
cask 'font-cascadia-code'
cask 'font-hack'
cask 'font-inconsolata'
cask 'font-inconsolata-lgc'
cask 'font-inconsolata-nerd-font'
cask 'font-jetbrains-mono'
cask 'font-meslo-lg-nerd-font'
cask 'font-source-code-pro'

# Mac App Store Apps
mas '1Blocker', id: 1365531024
mas '1Password for Safari', id: 1569813296
mas 'BBEdit', id: 404009241
mas 'Buildwatch', id: 1523347474
mas 'Core Data Lab', id: 1460684638
mas 'CotEditor', id: 1024640650
mas 'DaisyDisk', id: 411643860
mas 'Dato', id: 1470584107
mas 'DevCleaner', id: 1388020431
mas 'Developer', id: 640199958
mas 'Drafts', id: 1435957248
mas 'Expressions', id: 913158085
mas 'Fantastical', id: 975937182
mas 'HACK', id: 1464477788
mas 'Helm', id: 6479357934
mas 'Hush', id: 1544743900
mas 'InjectionIII', id: 1380446739
mas 'JSON Query', id: 953006734
mas 'Jayson', id: 1468691718
mas 'Keeper for Safari', id: 6444685332
mas 'LanguageTool', id: 15342757607
mas 'MeetingBar', id: 1532419400
mas 'Okta Extension App', id: 1439967473
mas 'Okta Verify', id: 490179405
mas 'Pixelmator', id: 407963104
mas 'Refined GitHub', id: 1519867270
mas 'Soulver 3', id: 1508732804
mas 'StopTheMadness Pro', id: 6471380298
mas 'Super Agent', id: 1568262835
mas 'TestFlight', id: 899247664
mas 'The Unarchiver', id: 425424353
mas 'Tot', id: 1491071483
mas 'xcsort', id: 1153337296
mas'Pixelmator Pro', id: 1289583905
mas'Reeder', id: 1529448980
mas'RocketSim', id: 1504940162
mas'SourceryPro', id: 1561780836
mas'Speediness', id: 1596706466
mas'StopTheFonts', id: 1671452642
mas'Supercopy', id: 6477720316
mas'Technotes', id: 6746719441
mas'Testpiler', id: 6737156289
mas'Tot', id: 1491071483
mas'Transporter', id: 1450874784
mas'Whisper Transcription', id: 1668083311
mas'uBlock Origin Lite', id: 6745342698
EOF

brew bundle --global

{{ end -}}